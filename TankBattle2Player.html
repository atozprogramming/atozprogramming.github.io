<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>TankDomination - 2Player</title>
    <!-- this is the code that will allow icon to be visible in the title bar of the brower -->
    <link rel="icon" type="image/ico" href="WebsiteLogo2.png" />
    <!-- you can also say this:  <link rel="icon" type="image/png" href="location/image.png" /> -->
</head>

<body>
    <canvas id="canvas" width="600" height="700"></canvas>
    <canvas id="canvas2" width="600" height="700"></canvas>
    <script src="./jquery-2.1.0.js"></script>
    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var canvas2 = document.getElementById("canvas2");
        var ctx2 = canvas2.getContext("2d");
        const ArenaHeight = 6000;
        const ArenaWidth = 6000;
        const WindowHeight = 700;
        const WindowWidth = 600;
        const WindowHeight2 = 700;
        const WindowWidth2 = 600;
        const centerX = WindowWidth / 2;
        const centerY = WindowHeight / 2;
        const centerX2 = WindowWidth2 / 2;
        const centerY2 = WindowHeight2 / 2;
        const arenaSizes = 1020;
        const DomPadding = 599;
        //Window is 1200 x 800
        //Player1(Speed should be 10 for gameplay)
        var Player = {
            HP: 100,
            X: arenaSizes / 2,
            Y: arenaSizes / 2,
            Speed: 0,
            SpeedMax: 10,
            Angle: 0,
            Level: 1,
            dom: false
        }
        var Player2 = {
            HP: 100,
            X: ArenaWidth - (arenaSizes / 2),
            Y: ArenaHeight - (arenaSizes / 2),
            Speed: 0,
            SpeedMax: 10,
            Angle: 0,
            Level: 1,
            dom: false
        }
        //Dominator
        var DominatorCannonDegree = 0;
        var DominatorX = ArenaHeight / 2;
        var DominatorY = ArenaWidth / 2;
        var DominatorHP = 500;
        var DominatorState = "yellow";

        var keys = {
            up: false,
            down: false,
            left: false,
            right: false,
            up2: false,
            down2: false,
            left2: false,
            right2: false,
            select: false,
            select2: false
        };
        var setting = 0;
        $(document.body).keydown(function (event) {
            // save status of the button 'pressed' == 'true'
            //select is the 'E' key, select2 is the 'enter' key
            if (event.keyCode == 38) {
                keys["up2"] = true;
            } else if (event.keyCode == 40) {
                keys["down2"] = true;
            } else if (event.keyCode == 37) {
                keys["left2"] = true;
            } else if (event.keyCode == 39) {
                keys["right2"] = true;
            } else if (event.keyCode == 87) {
                keys["up"] = true;
            } else if (event.keyCode == 83) {
                keys["down"] = true;
            } else if (event.keyCode == 65) {
                keys["left"] = true;
            } else if (event.keyCode == 68) {
                keys["right"] = true;
            } else if (event.keyCode == 69) {
                keys["select"] = true;
            } else if (event.keyCode == 13) {
                keys["select2"] = true;
            }
            if (keys["select"] == true && DominatorState == "blue" && Player.dom == false) {
                Player.X = DominatorX;
                Player.Y = DominatorY;
                Player.dom = true;
                Player.HP = 10000;
                console.log("DomControl")
            }
            if (keys["select2"] && DominatorState == "red" && Player2.dom == false) {
                setting = 1;
                Player2.X = DominatorX;
                Player2.Y = DominatorY;
                Player2.dom = true;
                Player2.HP = 10000;
                console.log("DomControl")
            }
            let angles = [];
            if (keys["left"]) {
                if (Player.dom == false) {
                    //Moving the player
                    Player.X = Player.X - Player.Speed;
                    if (Player.X < 1) {
                        Player.X = 1;
                    }
                    if (Player.Speed < Player.SpeedMax) {
                        Player.Speed = Player.Speed + 0.5;
                    }
                    angles.push(180);
                } else {
                    DominatorCannonDegree = DominatorCannonDegree + 2;
                }
            }
            if (keys["right"]) {
                if (Player.dom == false) {
                    //Moving the player
                    Player.X = Player.X + Player.Speed;
                    if (Player.X > ArenaWidth) {
                        Player.X = ArenaWidth;
                    }
                    if (Player.Speed < Player.SpeedMax) {
                        Player.Speed = Player.Speed + 0.5;
                    }
                    angles.push(0);
                } else {
                    DominatorCannonDegree = DominatorCannonDegree - 2;
                }
            }
            if (keys["up"]) {
                if (Player.dom == false) {
                    //Moving the player
                    Player.Y = Player.Y - Player.Speed;
                    if (Player.Y < 1) {
                        Player.Y = 1;
                    }
                    if (Player.Speed < Player.SpeedMax) {
                        Player.Speed = Player.Speed + 0.5;
                    }
                    angles.push(90);
                }
            }
            if (keys["down"]) {
                if (Player.dom == false) {
                    //Moving the player
                    Player.Y = Player.Y + Player.Speed;
                    if (Player.Y > ArenaHeight) {
                        Player.Y = ArenaHeight;
                    }
                    if (Player.Speed < Player.SpeedMax) {
                        Player.Speed = Player.Speed + 0.5;
                    }
                    angles.push(270);
                }
            }
            if (angles.length == 1) {
                Player.Angle = angles[0];
            } else if (angles.length == 2) {
                Player.Angle = 0.5 * (angles[0] + angles[1]);
                if (keys["down"] && keys["right"]) {
                    Player.Angle = 270 + 45;
                }
            }
            angles = [];
            if (keys["left2"]) {
                if (Player2.dom == false) {
                    //Moving the player
                    Player2.X = Player2.X - Player2.Speed;
                    if (Player2.X < 1) {
                        Player2.X = 1;
                    }
                    if (Player2.Speed < Player2.SpeedMax) {
                        Player2.Speed = Player2.Speed + 0.5;
                    }
                    angles.push(180);
                } else {
                    DominatorCannonDegree = DominatorCannonDegree + 2;
                }
            }
            if (keys["right2"]) {
                if (Player2.dom == false) {
                    //Moving the player
                    Player2.X = Player2.X + Player2.Speed;
                    if (Player2.X > ArenaWidth) {
                        Player2.X = ArenaWidth;
                    }
                    if (Player2.Speed < Player2.SpeedMax) {
                        Player2.Speed = Player2.Speed + 0.5;
                    }
                    angles.push(0);
                } else {
                    DominatorCannonDegree = DominatorCannonDegree - 2;
                }
            }
            if (keys["up2"]) {
                if (Player2.dom == false) {
                    //Moving the player
                    Player2.Y = Player2.Y - Player2.Speed;
                    if (Player2.Y < 1) {
                        Player2.Y = 1;
                    }
                    if (Player2.Speed < Player2.SpeedMax) {
                        Player2.Speed = Player2.Speed + 0.5;
                    }
                    angles.push(90);
                }
            }
            if (keys["down2"]) {
                if (Player2.dom == false) {
                    //Moving the player
                    Player2.Y = Player2.Y + Player2.Speed;
                    if (Player2.Y > ArenaHeight) {
                        Player2.Y = ArenaHeight;
                    }
                    if (Player2.Speed < Player2.SpeedMax) {
                        Player2.Speed = Player2.Speed + 0.5;
                    }
                    angles.push(270);
                }
            }
            if (angles.length == 1) {
                Player2.Angle = angles[0];
            } else if (angles.length == 2) {
                Player2.Angle = 0.5 * (angles[0] + angles[1]);
                if (keys["down2"] && keys["right2"]) {
                    Player2.Angle = 270 + 45;
                }
            }
        });

        $(document.body).keyup(function (event) {
            // reset status of the button 'released' == 'false'
            if (event.keyCode == 38) {
                keys["up2"] = false;
            } else if (event.keyCode == 40) {
                keys["down2"] = false;
            } else if (event.keyCode == 37) {
                keys["left2"] = false;
            } else if (event.keyCode == 39) {
                keys["right2"] = false;
            } else if (event.keyCode == 87) {
                keys["up"] = false;
            } else if (event.keyCode == 83) {
                keys["down"] = false;
            } else if (event.keyCode == 65) {
                keys["left"] = false;
            } else if (event.keyCode == 68) {
                keys["right"] = false;
            } else if (event.keyCode == 13) {
                keys["select2"] = false;
                if (Player2.dom == true) {
                    setting = 2;
                }
            } else if (event.keyCode == 89) {
                keys["select"] = false;
                if (Player.dom == true) {
                    setting = 2;
                }
            }
            if (keys["left"] == false && keys["right"] == false && keys["up"] == false && keys["down"] == false) {
                Player.Speed = 5;
            }
            if (keys["left2"] == false && keys["right2"] == false && keys["up2"] == false && keys["down2"] == false) {
                Player2.Speed = 5;
            }
        });
        function drawMiniMap() {
            //For player1
            ctx.fillStyle = "LightSlateGrey";
            ctx.fillRect(1090 - 1080, 10, 60, 60);
            ctx.fillStyle = "LightGrey";
            ctx.fillRect(1091 - 1080, 11, 58, 58);
            ctx.fillStyle = "DeepSkyBlue";
            ctx.fillRect(1091 - 1080, 11, arenaSizes / 100, arenaSizes / 100);
            ctx.fillStyle = "FireBrick";
            ctx.fillRect(1189 - 1080 - 40 - (arenaSizes / 100), 109 - (arenaSizes / 100) - 40, arenaSizes / 100, arenaSizes / 100);
            ctx.fillStyle = "Khaki";
            if (DominatorState == "blue") {
                ctx.fillStyle = "DeepSkyBlue";
            } else if (DominatorState == "red") {
                ctx.fillStyle = "FireBrick";
            }
            ctx.fillRect(1091 - 1080 + (ArenaWidth / 2 - DomPadding / 2) / 100, 11 + (ArenaHeight / 2 - DomPadding / 2) / 100, DomPadding / 100, DomPadding / 100);
            ctx.fillStyle = "Black";
            ctx.fillRect(1091 - 1080 + (Player.X) / 100, 11 + (Player.Y) / 100, 1, 1);
            //For player2 (Player2)
            ctx2.fillStyle = "LightSlateGrey";
            ctx2.fillRect(1090 - 600, 10, 60, 60);
            ctx2.fillStyle = "LightGrey";
            ctx2.fillRect(1091 - 600, 11, 58, 58);
            ctx2.fillStyle = "DeepSkyBlue";
            ctx2.fillRect(1091 - 600, 11, arenaSizes / 100, arenaSizes / 100);
            ctx2.fillStyle = "FireBrick";
            ctx2.fillRect(1189 - 600 - (arenaSizes / 100) - 40, 109 - (arenaSizes / 100) - 40, arenaSizes / 100, arenaSizes / 100);
            ctx2.fillStyle = "Khaki";
            if (DominatorState == "blue") {
                ctx2.fillStyle = "DeepSkyBlue";
            } else if (DominatorState == "red") {
                ctx2.fillStyle = "FireBrick";
            }
            ctx2.fillRect(1091 - 600 + (ArenaWidth / 2 - DomPadding / 2) / 100, 11 + (ArenaHeight / 2 - DomPadding / 2) / 100, DomPadding / 100, DomPadding / 100);
            ctx2.fillStyle = "Black";
            ctx2.fillRect(1091 - 600 + (Player2.X) / 100, 11 + (Player2.Y) / 100, 1, 1);
        }
        function fireDominator() {
            mainDominatorBullet.move();
            DominatorGunnerBullet1.move();
            DominatorGunnerBullet2.move();
            DominatorGunnerBullet3.move();
            DominatorGunnerBullet4.move();
            DominatorGunnerBullet5.move();
            DominatorGunnerBullet6.move();
            DominatorGunnerBullet7.move();
            DominatorGunnerBullet8.move();
        }
        function firePlayers() {
            PlayerBullet1.move();
            PlayerBullet2.move();
            PlayerBullet3.move();
            PlayerBullet4.move();
            PlayerBullet5.move();
            PlayerBullet6.move();
        }
        class PlayerBullet {
            constructor(source, angle, type, offset, delay, side) {
                this.offset = offset;
                this.type = type;
                this.angle = angle;
                this.state = "bullet";
                //Source is the Player Object
                this.x = source.X;
                this.y = source.Y;
                if (this.type == "normal") {
                    this.damage = 10;
                } else if (this.type == "gunner") {
                    this.damage = 10;
                } else if (this.type == "destroyer") {
                    this.damage = 90;
                }
                let radians = (angle * (2 * Math.PI)) / 360;
                let initialSpeed = 30;
                if (this.type == "normal") {
                    initialSpeed = 0;
                } else if (this.type == "gunner") {
                    initialSpeed = 40;
                } else if (this.type == "destroyer") {
                    initialSpeed = 25;
                }
                this.dx = initialSpeed * Math.cos(radians);
                this.dy = -(initialSpeed * Math.sin(radians));
                this.step = 0 - delay;
                this.side = side;
            }
        }
        PlayerBullet.prototype.move = function () {
            if ((this.side == "blue" && Player.dom == true) || (this.side == "red" && Player2.dom == true)) {

            } else {
                this.x = this.x + this.dx;
                this.y = this.y + this.dy;
            }
            this.step++;
            if (this.side == "blue" && this.x > ArenaWidth - arenaSizes && this.y > ArenaWidth - arenaSizes) {
                this.x = 999999;
                this.y = 999999;
            }
            if (this.side == "red" && this.x < arenaSizes && this.y < arenaSizes) {
                this.x = 99999999;
                this.y = 999999999;
            }
            if (this.x + 60 > DominatorX && this.y + 60 > DominatorY && this.x - 60 < DominatorX && this.y - 60 < DominatorY) {
                if ((DominatorState == "blue" && this.side == "blue") || (DominatorState == "red" && this.side == "red")) {
                    //Do nothing
                } else {
                    DominatorHP = DominatorHP - (this.damage * 2);
                    if (DominatorHP < 1) {
                        setting = 0;
                        if (DominatorState == "blue") {
                            DominatorState = "yellow"
                            Player.dom = false;
                            Player2.Level = 2;
                        } else if (DominatorState == "red") {
                            DominatorState = "yellow";
                            Player2.dom = false;
                            Player.Level = 2;
                        } else if (DominatorState == "yellow") {
                            if (this.side == "blue") {
                                DominatorState = "blue";
                            } else {
                                DominatorState = "red";
                            }
                        }
                        DominatorHP = 500;
                    }
                    this.x = 999999;
                    this.y = 9999999;
                }
            }
            if (this.x + 50 > Player2.X && this.y + 50 > Player2.Y && this.x - 50 < Player2.X && this.y - 50 < Player2.Y && this.side == "blue") {
                Player2.HP = Player2.HP - this.damage;
                this.x = 999999;
                this.y = 9999999;
            }
            if (this.x + 50 > Player.X && this.y + 50 > Player.Y && this.x - 50 < Player.X && this.y - 50 < Player.Y && this.side == "red") {
                Player.HP = Player.HP - this.damage;
                this.x = 999999;
                this.y = 9999999;
            }
            if (this.x + 30 > mainDominatorBullet.x && this.y + 30 > mainDominatorBullet.y && this.x - 30 < mainDominatorBullet.x && this.y - 30 < mainDominatorBullet.y && this.side != DominatorState) {
                this.x = 999999;
                this.y = 9999999;
            }
            if (this.step > 60) {
                let angle = 0;
                if (this.side == "blue") {
                    this.x = Player.X
                    this.y = Player.Y;
                    angle = Player.Angle;
                } else {
                    this.x = Player2.X;
                    this.y = Player2.Y;
                    angle = Player2.Angle;
                }
                angle = angle + this.offset;
                let radians = (angle * (2 * Math.PI)) / 360;
                let initialSpeed = 30;
                if (this.type == "normal") {
                    initialSpeed = 15;
                } else if (this.type == "gunner") {
                    initialSpeed = 28;
                } else if (this.type == "destroyer") {
                    initialSpeed = 15;
                }
                this.dx = initialSpeed * Math.cos(radians);
                this.dy = -(initialSpeed * Math.sin(radians));
                this.step = 0;
            }
        }
        class DominatorBullet {
            constructor(angle, type, offset, delay) {
                this.offset = offset;
                this.type = type;
                this.angle = angle;
                this.state = "bullet";
                this.x = ArenaWidth / 2;
                this.y = ArenaHeight / 2;
                let radians = (angle * (2 * Math.PI)) / 360;
                let initialSpeed = 0;
                if (type == "normal") {
                    initialSpeed = 100;
                }
                this.dx = initialSpeed * Math.cos(radians);
                this.dy = -(initialSpeed * Math.sin(radians));
                this.step = 0 - delay;
            }
        }
        DominatorBullet.prototype.move = function () {
            this.x = this.x + this.dx;
            this.y = this.y + this.dy;
            this.step++;
            //this.dx = this.dx * 0.95;
            //this.dy = this.dy * 0.95;
            if (this.x + 50 > Player.X && this.y + 50 > Player.Y && this.x - 50 < Player.X && this.y - 50 < Player.Y && DominatorState != "blue") {
                //Touching Player1
                Player.HP = 0;
            } else if (this.x + 50 > Player2.X && this.y + 50 > Player2.Y && this.x - 50 < Player2.X && this.y - 50 < Player2.Y && DominatorState != "red") {
                //Touching Player2
                Player2.HP = 0;
            }
            if (this.step == 1) {
                if (this.type == "gunner") {
                    this.dx = this.dx * 0.2 //Speed of 30
                    this.dy = this.dy * 0.2 //Speed of 30
                } else {
                    this.dx = this.dx * 0.1 //Speed of 20s
                    this.dy = this.dy * 0.1 //Speed of 20
                }
            }
            if (this.type == "gunner" && this.step > 30) {
                this.x = ArenaWidth / 2;
                this.y = ArenaHeight / 2;
            }
            if (this.step > 60) {

                this.state = "bullet"
                this.x = ArenaWidth / 2;
                this.y = ArenaHeight / 2;
                let radians = ((DominatorCannonDegree + this.offset) * (2 * Math.PI)) / 360;

                let initialSpeed = 100;
                this.dx = initialSpeed * Math.cos(radians);
                this.dy = -(initialSpeed * Math.sin(radians));
                this.step = 0;
                //It keeps the same type
            }
        }
        function checkPlayerDeath() {
            let dif = 30;
            if (DominatorState != "blue" && Player.X + dif > DominatorX && Player.X - dif < DominatorX && Player.Y + dif > DominatorY && Player.Y - dif < DominatorY) {
                Player.HP = 0;
            }
            if (DominatorState != "red" && Player2.X + dif > DominatorX && Player2.X - dif < DominatorX && Player2.Y + dif > DominatorY && Player2.Y - dif < DominatorY) {
                Player2.HP = 0;
            }
            if (Player.HP < 1) {
                Player.X = arenaSizes / 2;
                Player.Y = arenaSizes / 2;
                Player.HP = 100;
                Player.Level = 1;
            }
            if (Player2.HP < 1) {
                Player2.X = ArenaWidth - (arenaSizes / 2);
                Player2.Y = ArenaHeight - (arenaSizes / 2);
                Player2.HP = 100;
                Player2.Level = 1;
            }
        }
        function drawPlayer1Screen() {
            //BlueBase
            ctx.fillStyle = "DeepSkyBlue";
            ctx.fillRect(centerX - Player.X, centerY - Player.Y, arenaSizes, arenaSizes);
            //RedBase
            ctx.fillStyle = "FireBrick";
            ctx.fillRect(centerX + ArenaWidth - Player.X - arenaSizes, centerY + ArenaHeight - Player.Y - arenaSizes, arenaSizes, arenaSizes);
            //Gridlines
            for (let i = 19; i < ArenaWidth; i = i + 40) {
                ctx.fillStyle = "Gainsboro";
                //horizontal
                ctx.fillRect(centerX - Player.X, centerY - Player.Y + i, ArenaWidth, 1);
                //vertical
                ctx.fillRect(centerX - Player.X + i, centerY - Player.Y, 1, ArenaHeight);
            }
            //Borders
            ctx.fillStyle = "LightSlateGrey";
            //TopBorder
            ctx.fillRect(centerX - Player.X, centerY - Player.Y, ArenaWidth, 10);
            //Bottom Border
            ctx.fillRect(centerX - Player.X, centerY + ArenaHeight - Player.Y, ArenaWidth, 10);
            //Left Border
            ctx.fillRect(centerX - Player.X, centerY - Player.Y, 10, ArenaHeight);
            //Right Border
            ctx.fillRect(centerX + ArenaWidth - Player.X, centerY - Player.Y, 10, ArenaHeight);

            //Dominator box
            ctx.fillStyle = "Khaki";
            if (DominatorState == "blue") {
                ctx.fillStyle = "DeepSkyBlue";
            } else if (DominatorState == "red") {
                ctx.fillStyle = "FireBrick";
            }
            ctx.fillRect(ArenaWidth / 2 - DomPadding / 2 - Player.X + centerX, ArenaHeight / 2 - DomPadding / 2 - Player.Y + centerY, DomPadding, DomPadding);
            ctx.fillStyle = "CadetBlue";
            ctx.fillRect(ArenaWidth / 2 - Player.X + centerX - 250, ArenaHeight / 2 + 150 - Player.Y + centerY, 500 * (DominatorHP / 500), 10);
            //Dominator Bullet

            ctx.strokeStyle = "Gold";
            ctx.fillStyle = "Yellow";
            if (DominatorState == "blue") {
                ctx.strokeStyle = "Blue";
                ctx.fillStyle = "CornflowerBlue";
            } else if (DominatorState == "red") {
                ctx.strokeStyle = "Red";
                ctx.fillStyle = "Crimson";
            }
            ctx.beginPath();
            ctx.arc(mainDominatorBullet.x - Player.X + centerX, mainDominatorBullet.y - Player.Y + centerY, 25, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();

            //Dominator Side-Bullets
            ctx.strokeStyle = "Gold";
            ctx.fillStyle = "Yellow";
            if (DominatorState == "blue") {
                ctx.strokeStyle = "Blue";
                ctx.fillStyle = "CornflowerBlue";
            } else if (DominatorState == "red") {
                ctx.strokeStyle = "Red";
                ctx.fillStyle = "Crimson";
            }
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet1.x - Player.X + centerX, DominatorGunnerBullet1.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet2.x - Player.X + centerX, DominatorGunnerBullet2.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet3.x - Player.X + centerX, DominatorGunnerBullet3.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet4.x - Player.X + centerX, DominatorGunnerBullet4.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet5.x - Player.X + centerX, DominatorGunnerBullet5.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet6.x - Player.X + centerX, DominatorGunnerBullet6.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet7.x - Player.X + centerX, DominatorGunnerBullet7.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(DominatorGunnerBullet8.x - Player.X + centerX, DominatorGunnerBullet8.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();


            //Dominator Cannon(s)

            ctx.save();
            ctx.fillStyle = "LightSlateGrey";
            ctx.translate(DominatorX - Player.X + centerX, DominatorY - Player.Y + centerY);
            ctx.rotate((-DominatorCannonDegree - 10) * Math.PI / 180);
            ctx.fillRect(0, -25, 90, 25);
            ctx.restore();

            ctx.save();
            ctx.fillStyle = "LightSlateGrey";
            ctx.translate(DominatorX - Player.X + centerX, DominatorY - Player.Y + centerY);
            ctx.rotate((-DominatorCannonDegree + 30) * Math.PI / 180);
            ctx.fillRect(0, -25, 90, 25);
            ctx.restore();
            //Main Cannon
            ctx.save();
            ctx.translate(DominatorX - Player.X + centerX, DominatorY - Player.Y + centerY);
            ctx.rotate(-DominatorCannonDegree * Math.PI / 180);
            ctx.fillStyle = "SlateGrey";
            ctx.fillRect(0, -25, 100, 50);
            ctx.fillStyle = "LightSlateGrey";
            ctx.fillRect(0, -23, 98, 46);
            ctx.restore();

            //Dominator Body
            ctx.strokeStyle = "Gold";
            ctx.fillStyle = "Yellow";
            if (DominatorState == "blue") {
                ctx.strokeStyle = "Blue";
                ctx.fillStyle = "CornflowerBlue";
            } else if (DominatorState == "red") {
                ctx.strokeStyle = "Red";
                ctx.fillStyle = "Crimson";
            }
            ctx.beginPath();
            ctx.arc(ArenaWidth / 2 - Player.X + centerX, ArenaHeight / 2 - Player.Y + centerY, 75, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();

            //Player Bullets
            ctx.strokeStyle = "Blue";
            ctx.fillStyle = "CornflowerBlue";
            ctx.beginPath();
            ctx.arc(PlayerBullet1.x - Player.X + centerX, PlayerBullet1.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(PlayerBullet2.x - Player.X + centerX, PlayerBullet2.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(PlayerBullet3.x - Player.X + centerX, PlayerBullet3.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.strokeStyle = "Red";
            ctx.fillStyle = "Crimson";
            ctx.beginPath();
            ctx.arc(PlayerBullet4.x - Player.X + centerX, PlayerBullet4.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(PlayerBullet5.x - Player.X + centerX, PlayerBullet5.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            ctx.beginPath();
            ctx.arc(PlayerBullet6.x - Player.X + centerX, PlayerBullet6.y - Player.Y + centerY, 10, 0, 2 * Math.PI);
            ctx.fill();
            ctx.stroke();
            //Player1
            if (Player.dom == false) {
                ctx.save();
                ctx.fillStyle = "LightSlateGrey";
                ctx.translate(WindowWidth / 2, WindowHeight / 2);
                ctx.rotate((-Player.Angle) * Math.PI / 180);
                ctx.fillRect(0, -10, 40, 20);
                ctx.restore();
                ctx.strokeStyle = "Blue";
                ctx.fillStyle = "CornflowerBlue";
                ctx.beginPath();
                ctx.arc(WindowWidth / 2, WindowHeight / 2, 25, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();
            }
            //Player2
            if (Player2.dom == false) {
                ctx.save();
                ctx.fillStyle = "LightSlateGrey";
                ctx.translate(Player2.X - Player.X + centerX, Player2.Y - Player.Y + centerY);
                ctx.rotate((-Player2.Angle) * Math.PI / 180);
                ctx.fillRect(0, -10, 40, 20);
                ctx.restore();
                ctx.strokeStyle = "Red";
                ctx.fillStyle = "Crimson";
                ctx.beginPath();
                ctx.arc(Player2.X - Player.X + centerX, Player2.Y - Player.Y + centerY, 25, 0, 2 * Math.PI);
                ctx.fill();
                ctx.stroke();
                ctx.clearRect(WindowWidth, 0, 1400, 900);
            }
        }
        function drawPlayer2Screen() {
            //BlueBase
            ctx2.fillStyle = "DeepSkyBlue";
            ctx2.fillRect(centerX2 - Player2.X, centerY2 - Player2.Y, arenaSizes, arenaSizes);
            //RedBase
            ctx2.fillStyle = "FireBrick";
            ctx2.fillRect(centerX2 + ArenaWidth - Player2.X - arenaSizes, centerY2 + ArenaHeight - Player2.Y - arenaSizes, arenaSizes, arenaSizes);
            //Gridlines
            for (let i = 19; i < ArenaWidth; i = i + 40) {
                ctx2.fillStyle = "Gainsboro";
                //horizontal
                ctx2.fillRect(centerX2 - Player2.X, centerY2 - Player2.Y + i, ArenaWidth, 1);
                //vertical
                ctx2.fillRect(centerX2 - Player2.X + i, centerY2 - Player2.Y, 1, ArenaHeight);

            }
            //Borders
            ctx2.fillStyle = "LightSlateGrey";
            //TopBorder
            ctx2.fillRect(centerX2 - Player2.X, centerY2 - Player2.Y, ArenaWidth, 10);
            //Bottom Border
            ctx2.fillRect(centerX2 - Player2.X, centerY2 + ArenaHeight - Player2.Y, ArenaWidth, 10);
            //Left Border
            ctx2.fillRect(centerX2 - Player2.X, centerY2 - Player2.Y, 10, ArenaHeight);
            //Right Border
            ctx2.fillRect(centerX2 + ArenaWidth - Player2.X, centerY2 - Player2.Y, 10, ArenaHeight + 10);

            //Dominator box
            ctx2.fillStyle = "Khaki";
            if (DominatorState == "blue") {
                ctx2.fillStyle = "DeepSkyBlue";
            } else if (DominatorState == "red") {
                ctx2.fillStyle = "FireBrick";
            }
            ctx2.fillRect(ArenaWidth / 2 - DomPadding / 2 - Player2.X + centerX2, ArenaHeight / 2 - DomPadding / 2 - Player2.Y + centerY2, DomPadding, DomPadding);
            ctx2.fillStyle = "CadetBlue";
            ctx2.fillRect(ArenaWidth / 2 - Player2.X + centerX2 - 250, ArenaHeight / 2 + 150 - Player2.Y + centerY2, 500 * (DominatorHP / 500), 10);
            //Dominator Bullet

            ctx2.strokeStyle = "Gold";
            ctx2.fillStyle = "Yellow";
            if (DominatorState == "blue") {
                ctx2.strokeStyle = "Blue";
                ctx2.fillStyle = "CornflowerBlue";
            } else if (DominatorState == "red") {
                ctx2.strokeStyle = "Red";
                ctx2.fillStyle = "Crimson";
            }
            ctx2.beginPath();
            ctx2.arc(mainDominatorBullet.x - Player2.X + centerX2, mainDominatorBullet.y - Player2.Y + centerY2, 25, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();

            //Dominator Side-Bullets
            ctx2.strokeStyle = "Gold";
            ctx2.fillStyle = "Yellow";
            if (DominatorState == "blue") {
                ctx2.strokeStyle = "Blue";
                ctx2.fillStyle = "CornflowerBlue";
            } else if (DominatorState == "red") {
                ctx2.strokeStyle = "Red";
                ctx2.fillStyle = "Crimson";
            }
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet1.x - Player2.X + centerX2, DominatorGunnerBullet1.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet2.x - Player2.X + centerX2, DominatorGunnerBullet2.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet3.x - Player2.X + centerX2, DominatorGunnerBullet3.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet4.x - Player2.X + centerX2, DominatorGunnerBullet4.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet5.x - Player2.X + centerX2, DominatorGunnerBullet5.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet6.x - Player2.X + centerX2, DominatorGunnerBullet6.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet7.x - Player2.X + centerX2, DominatorGunnerBullet7.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(DominatorGunnerBullet8.x - Player2.X + centerX2, DominatorGunnerBullet8.y - Player2.Y + centerY2, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();


            //Dominator Cannon(s)

            ctx2.save();
            ctx2.fillStyle = "LightSlateGrey";
            ctx2.translate(DominatorX - Player2.X + centerX2, DominatorY - Player2.Y + centerY);
            ctx2.rotate((-DominatorCannonDegree - 10) * Math.PI / 180);
            ctx2.fillRect(0, -25, 90, 25);
            ctx2.restore();

            ctx2.save();
            ctx2.fillStyle = "LightSlateGrey";
            ctx2.translate(DominatorX - Player2.X + centerX2, DominatorY - Player2.Y + centerY2);
            ctx2.rotate((-DominatorCannonDegree + 30) * Math.PI / 180);
            ctx2.fillRect(0, -25, 90, 25);
            ctx2.restore();
            //Main Cannon
            ctx2.save();
            ctx2.translate(DominatorX - Player2.X + centerX2, DominatorY - Player2.Y + centerY2);
            ctx2.rotate(-DominatorCannonDegree * Math.PI / 180);
            ctx2.fillStyle = "SlateGrey";
            ctx2.fillRect(0, -25, 100, 50);
            ctx2.fillStyle = "LightSlateGrey";
            ctx2.fillRect(0, -23, 98, 46);
            ctx2.restore();

            //Dominator Body
            ctx2.strokeStyle = "Gold";
            ctx2.fillStyle = "Yellow";
            if (DominatorState == "blue") {
                ctx2.strokeStyle = "Blue";
                ctx2.fillStyle = "CornflowerBlue";
            } else if (DominatorState == "red") {
                ctx2.strokeStyle = "Red";
                ctx2.fillStyle = "Crimson";
            }
            ctx2.beginPath();
            ctx2.arc(ArenaWidth / 2 - Player2.X + centerX2, ArenaHeight / 2 - Player2.Y + centerY2, 75, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();

            //Player Bullets
            ctx2.strokeStyle = "Blue";
            ctx2.fillStyle = "CornflowerBlue";
            ctx2.beginPath();
            ctx2.arc(PlayerBullet1.x - Player2.X + centerX, PlayerBullet1.y - Player2.Y + centerY, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(PlayerBullet2.x - Player2.X + centerX, PlayerBullet2.y - Player2.Y + centerY, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(PlayerBullet3.x - Player2.X + centerX, PlayerBullet3.y - Player2.Y + centerY, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.strokeStyle = "Red";
            ctx2.fillStyle = "Crimson";
            ctx2.beginPath();
            ctx2.arc(PlayerBullet4.x - Player2.X + centerX, PlayerBullet4.y - Player2.Y + centerY, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(PlayerBullet5.x - Player2.X + centerX, PlayerBullet5.y - Player2.Y + centerY, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();
            ctx2.beginPath();
            ctx2.arc(PlayerBullet6.x - Player2.X + centerX, PlayerBullet6.y - Player2.Y + centerY, 10, 0, 2 * Math.PI);
            ctx2.fill();
            ctx2.stroke();

            //Player1
            if (Player.dom == false) {
                ctx2.save();
                ctx2.fillStyle = "LightSlateGrey";
                ctx2.translate(Player.X - Player2.X + centerX, Player.Y - Player2.Y + centerY2);
                ctx2.rotate((-Player.Angle) * Math.PI / 180);
                ctx2.fillRect(0, -10, 40, 20);
                ctx2.restore();
                ctx2.strokeStyle = "Blue";
                ctx2.fillStyle = "CornflowerBlue";
                ctx2.beginPath();
                ctx2.arc(Player.X - Player2.X + centerX2, Player.Y - Player2.Y + centerY2, 25, 0, 2 * Math.PI);
                ctx2.fill();
                ctx2.stroke();
            }
            //Player2
            if (Player2.dom == false) {
                ctx2.save();
                ctx2.fillStyle = "LightSlateGrey";
                ctx2.translate(WindowWidth2 / 2, WindowHeight2 / 2);
                ctx2.rotate((-Player2.Angle) * Math.PI / 180);
                ctx2.fillRect(0, -10, 40, 20);
                ctx2.restore();
                ctx2.strokeStyle = "Red";
                ctx2.fillStyle = "Crimson";
                ctx2.beginPath();
                ctx2.arc(WindowWidth2 / 2, WindowHeight2 / 2, 25, 0, 2 * Math.PI);
                ctx2.fill();
                ctx2.stroke();
            }
        }
        function drawHPs() {
            if (Player.dom == false) {
                ctx.fillStyle = "CadetBlue";
                ctx.fillRect(WindowWidth / 2 - 50, WindowHeight / 2 + 40, 100 * (Player.HP / 100), 10);
            }
            if (Player2.dom == false) {
                ctx2.fillStyle = "Maroon";
                ctx2.fillRect(WindowWidth2 / 2 - 50, WindowHeight2 / 2 + 40, 100 * (Player2.HP / 100), 10);
            }
        }
        function drawSprites() {
            drawPlayer1Screen();
            drawPlayer2Screen();
            //MiniMap
            drawMiniMap();
            //Player Health Bars
            drawHPs();
        }
        let mainDominatorBullet = new DominatorBullet(0, "Destroyer", 0, 0);
        let DominatorGunnerBullet1 = new DominatorBullet(0, "Gunner", 20, 5);
        let DominatorGunnerBullet2 = new DominatorBullet(0, "Gunner", 20, 10);
        let DominatorGunnerBullet3 = new DominatorBullet(0, "Gunner", -20, 5);
        let DominatorGunnerBullet4 = new DominatorBullet(0, "Gunner", -20, 10);
        let DominatorGunnerBullet5 = new DominatorBullet(0, "Gunner", 20, 15);
        let DominatorGunnerBullet6 = new DominatorBullet(0, "Gunner", -20, 15);
        let DominatorGunnerBullet7 = new DominatorBullet(0, "Gunner", 20, 20);
        let DominatorGunnerBullet8 = new DominatorBullet(0, "Gunner", -20, 20);
        //Blue
        let PlayerBullet1 = new PlayerBullet(Player, Player.Angle, "normal", 0, 0, "blue");
        let PlayerBullet2 = new PlayerBullet(Player, Player.Angle, "normal", 0, 20, "blue");
        let PlayerBullet3 = new PlayerBullet(Player, Player.Angle, "normal", 0, 40, "blue");
        //Red
        let PlayerBullet4 = new PlayerBullet(Player2, Player2.Angle, "normal", 0, 0, "red");
        let PlayerBullet5 = new PlayerBullet(Player2, Player2.Angle, "normal", 0, 20, "red");
        let PlayerBullet6 = new PlayerBullet(Player2, Player2.Angle, "normal", 0, 40, "red");

        var intervalId = setInterval(function () {
            if (Player.dom == false && Player2.dom == false) {
                if (DominatorState == "blue") {

                }
                DominatorCannonDegree = DominatorCannonDegree + 1;
            }
            //DominatorCannonDegree = 180;
            ctx.clearRect(0, 0, 1400, 900);
            ctx2.clearRect(0, 0, 1400, 900);
            ctx.fillStyle = "LightGrey";
            ctx.fillRect(0, 0, WindowWidth, WindowHeight);
            ctx2.fillStyle = "LightGrey";
            ctx2.fillRect(0, 0, WindowWidth, WindowHeight);
            fireDominator();
            firePlayers();
            checkPlayerDeath();
            drawSprites();
            if (Player.dom == false && Player2.dom == false) {
                if (DominatorState == "blue") {
                    ctx.font = "15px Consolas";
                    ctx.fillStyle = "Black";
                    ctx.fillRect(189, 10, 350, 24);
                    ctx.fillStyle = "DeepSkyBlue";
                    ctx.fillRect(190, 11, 348, 22);
                    ctx.fillStyle = "White";
                    ctx.textBaseline = "top";
                    ctx.fillText("Press E to take control of the Dominator", 201, 11);
                }
                if (DominatorState == "red") {
                    ctx2.font = "15px Consolas";
                    ctx2.fillStyle = "Black";
                    ctx2.fillRect(189 - 100, 10, 350, 24);
                    ctx2.fillStyle = "FireBrick";
                    ctx2.fillRect(190 - 100, 11, 348, 22);
                    ctx2.fillStyle = "White";
                    ctx2.textBaseline = "top";
                    ctx2.fillText("Press Enter to take control of the Dominator", 190 - 100, 11);

                }
            }
            //ctx.fillText("Player.X:" + Player.X, 0, 20);
            //ctx.fillText("Player.Y:" + Player.Y, 0, 40);
            //ctx.fillText("Player.HP:" + Player.HP, 0, 60);
        }, 10);
    </script>
</body>

</html>