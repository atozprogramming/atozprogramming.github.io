<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <!-- this is the code that will allow icon to be visible in the title bar of the brower -->
    <link rel="icon" type="image/ico" href="WebsiteLogo2.png" />
    <!-- you can also say this:  <link rel="icon" type="image/png" href="location/image.png" /> -->
    <style>
        * {
            PADDING: 0;
            MARGIN: 0;
        }

        canvas {
            background: "White";
            display: block;
            margin: 0 auto;
        }
    </style>
    <link rel="stylesheet" href="./bootstrap.min.css">
</head>
<script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML'
    type='text/javascript' async></script>

<body>
    <canvas id="myCanvas" width="1200" height="700"></canvas>
    <script src="./jquery-2.1.0.js"></script>
    <script>
        var canvas = document.getElementById("myCanvas");
        var ctx = canvas.getContext("2d");
        //Key input
        var shiftCaps = false;
        function keyNames(i) {
            if (i == 32) {
                return "space";
            } else if (i == 17) {
                return "control";
            } else if (i == 18) {
                return "alt";
            } else if (i == 9) {
                return "tab";
            } else if (i == 20) {
                return "cap";
            } else if (i == 16) {
                return "shift";
            } else if (i == 37) {
                return "left";
            } else if (i == 13) {
                return "enter";
            } else if (i == 38) {
                return "up";
            } else if (i == 40) {
                return "down";
            } else if (i == 39) {
                return "right";
            } else if (i == 8) {
                return "back";
            } else {
                if (shiftCaps == false) {
                    //lowercase letters and numbers
                    if (i == 190) {
                        return ".";
                    } else if (i == 191) {
                        return "/";
                    } else if (i == 188) {
                        return ",";
                    } else if (i == 222) {
                        return "'";
                    } else if (i == 186) {
                        return ";";
                    } else if (i == 187) {
                        return "=";
                    } else if (i == 189) {
                        return "-";
                    } else if (i == 219) {
                        return "[";
                    } else if (i == 221) {
                        return "]";
                    } else if (i == 65) {
                        //Letters!
                        return "a";
                    } else if (i == 66) {
                        return "b";
                    } else if (i == 67) {
                        return "c";
                    } else if (i == 68) {
                        return "d";
                    } else if (i == 69) {
                        return "e";
                    } else if (i == 70) {
                        return "f";
                    } else if (i == 71) {
                        return "g";
                    } else if (i == 72) {
                        return "h";
                    } else if (i == 73) {
                        return "i";
                    } else if (i == 74) {
                        return "j";
                    } else if (i == 75) {
                        return "k";
                    } else if (i == 76) {
                        return "l";
                    } else if (i == 77) {
                        return "m";
                    } else if (i == 78) {
                        return "n";
                    } else if (i == 79) {
                        return "o";
                    } else if (i == 80) {
                        return "p";
                    } else if (i == 81) {
                        return "q";
                    } else if (i == 82) {
                        return "r";
                    } else if (i == 83) {
                        return "s";
                    } else if (i == 84) {
                        return "t";
                    } else if (i == 85) {
                        return "u";
                    } else if (i == 86) {
                        return "v";
                    } else if (i == 87) {
                        return "w";
                    } else if (i == 88) {
                        return "x";
                    } else if (i == 89) {
                        return "y";
                    } else if (i == 90) {
                        return "z";
                    } else if (i == 48) {
                        return "0";
                    } else if (i == 49) {
                        return "1";
                    } else if (i == 50) {
                        return "2";
                    } else if (i == 51) {
                        return "3";
                    } else if (i == 52) {
                        return "4";
                    } else if (i == 53) {
                        return "5";
                    } else if (i == 54) {
                        return "6";
                    } else if (i == 55) {
                        return "7";
                    } else if (i == 56) {
                        return "8";
                    } else if (i == 57) {
                        return "9";
                    } else {
                        return ""
                    }
                } else {
                    if (shiftCaps == 1) {
                        shiftCaps = false;
                    }
                    //Capital letters and symbols
                    if (i == 190) {
                        return ">";
                    } else if (i == 191) {
                        return "?";
                    } else if (i == 188) {
                        return "<";
                    } else if (i == 222) {
                        return `"`;
                    } else if (i == 186) {
                        return ":";
                    } else if (i == 187) {
                        return "+";
                    } else if (i == 189) {
                        return "_";
                    } else if (i == 219) {
                        return "{";
                    } else if (i == 221) {
                        return "}";
                    } else if (i == 65) {
                        //Letters!
                        return "A";
                    } else if (i == 66) {
                        return "B";
                    } else if (i == 67) {
                        return "C";
                    } else if (i == 68) {
                        return "D";
                    } else if (i == 69) {
                        return "E";
                    } else if (i == 70) {
                        return "F";
                    } else if (i == 71) {
                        return "G";
                    } else if (i == 72) {
                        return "H";
                    } else if (i == 73) {
                        return "I";
                    } else if (i == 74) {
                        return "J";
                    } else if (i == 75) {
                        return "K";
                    } else if (i == 76) {
                        return "L";
                    } else if (i == 77) {
                        return "M";
                    } else if (i == 78) {
                        return "N";
                    } else if (i == 79) {
                        return "O";
                    } else if (i == 80) {
                        return "P";
                    } else if (i == 81) {
                        return "Q";
                    } else if (i == 82) {
                        return "R";
                    } else if (i == 83) {
                        return "S";
                    } else if (i == 84) {
                        return "T";
                    } else if (i == 85) {
                        return "U";
                    } else if (i == 86) {
                        return "V";
                    } else if (i == 87) {
                        return "W";
                    } else if (i == 88) {
                        return "X";
                    } else if (i == 89) {
                        return "Y";
                    } else if (i == 90) {
                        return "Z";
                    } else if (i == 48) {
                        return ")";
                    } else if (i == 49) {
                        return "!";
                    } else if (i == 50) {
                        return "@";
                    } else if (i == 51) {
                        return "#";
                    } else if (i == 52) {
                        return "$";
                    } else if (i == 53) {
                        return "%";
                    } else if (i == 54) {
                        return "^";
                    } else if (i == 55) {
                        return "&";
                    } else if (i == 56) {
                        return "*";
                    } else if (i == 57) {
                        return "(";
                    } else {
                        return ""
                    }
                }
            }
            if (shiftCaps == 1) {
                shiftCaps = 0;
            }
        }
        var lastKey = "";
        var myHistory = [];
        //Key handler
        $("body").keydown(function (event) {
            //console.log(event.keyCode);
            lastKey = keyNames(event.keyCode);
            if (numTest(lastKey) == true) {
                numChangeAdd(lastKey);
            } else if (lastKey == "back") {
                numChangeMin();
                event.preventDefault();
            } else if (lastKey == "up") {
                sign = sign + 1;
                if (sign > 6) {
                    sign = 1;
                }
            } else if (lastKey == "down") {
                sign = sign - 1;
                if (sign < 1) {
                    sign = 6;
                }
            } else if (lastKey == "left" || lastKey == "right") {
                if (highlighter == 1) {
                    highlighter = 2;
                } else {
                    highlighter = 1;
                }
            } else if (lastKey == "enter") {
                if (sign == 1) {
                    signString = " + "
                } else if (sign == 2) {
                    signString = " - "
                } else if (sign == 3) {
                    signString = " * "
                } else if (sign == 4) {
                    signString = " / "
                } else if (sign == 5) {
                    signString = "√"
                } else if (sign == 6) {
                    signString = "^"
                }
                myHistory.push(numberOne + signString + numberTwo + " = " + solution);
                //Changing Values
                if (solution != undefined && solution != NaN && solution != Infinity) {
                    //numberOne = solution;
                    //numberTwo = solution;
                }
            }
        });
        var numberOne = 0;
        var numberTwo = 0;
        var sign = 1;
        var highlighter = 1;
        var solution = 0;

        //Key handler functions

        function numTest(num) {
            if (num == "1" || num == "2" || num == "3" || num == "4" || num == "5" || num == "6" || num == "7" || num == "8" || num == "9" || num == "0") {
                return true;
            } else {
                return false;
            }
        }
        function numChangeAdd(key) {
            if (highlighter == 1) {
                if (numberOne < Math.pow(10, 12)) {
                    numberOne = numberOne * 10;
                    numberOne = numberOne + Number(key);
                }
            } else {
                if (numberTwo < Math.pow(10, 12)) {
                    numberTwo = numberTwo * 10;
                    numberTwo = numberTwo + Number(key);
                }
            }
        }
        function numChangeMin() {
            if (highlighter == 1) {
                numberOne = String(numberOne);
                if (numberOne.length < 2) {
                    numberOne = "0";
                    numberOne = Number(numberOne);
                } else {
                    numberOne = numberOne.slice(0, -1);
                    numberOne = Number(numberOne);
                }
            } else {
                numberTwo = String(numberTwo);
                if (numberTwo.length < 2) {
                    numberTwo = "0";
                    numberTwo = Number(numberTwo);
                } else {
                    numberTwo = numberTwo.slice(0, -1);
                    numberTwo = Number(numberTwo);
                }
            }
        }
        function GCF(num1, num2) {
            if (num1 > num2) {
                for (let i = num2; i > 0; i = i - 1) {
                    if (num1 % i == 0 && num2 % i == 0) {
                        return i;
                    }
                }
            } else {
                for (let i = num1; i > 0; i = i - 1) {
                    if (num1 % i == 0 && num2 % i == 0) {
                        return i;
                    }
                }
            }
        }
        function fraction(n1, n2) {
            let factor = GCF(n1, n2);
            let numerator = n1 / factor;
            let denominator = n2 / factor;
            return String(numerator + "/" + denominator);
        }
        console.log("9/3 is " + fraction(9, 3));
        console.log("10/100 is " + fraction(10, 100));
        console.log("4/494 is " + fraction(4, 494));
        function answer() {
            if (sign == 1) {
                return numberOne + numberTwo;
            } else if (sign == 2) {
                return numberOne - numberTwo;
            } else if (sign == 3) {
                return numberOne * numberTwo;
            } else if (sign == 4) {
                if (numberOne != 0 && numberTwo != 0) {
                    if (numberOne < 100000 || numberTwo < 100000) {
                        ctx.fillStyle = "SeaGreen";
                        ctx.textAlign = "right";
                        ctx.textBaseline = "top";
                        ctx.fillText(fraction(numberOne, numberTwo), 1140, 310);
                    } else {
                        ctx.fillText("Computing Overload", 1140, 310);
                    }
                    return numberOne / numberTwo;
                }
            } else if (sign == 5) {
                let a = Math.pow(numberTwo, 1 / numberOne);
                if (Math.floor(a) == Math.floor(a + 0.00001)) {
                    return Math.pow(numberTwo, 1 / numberOne);
                }
                return Math.floor(0.00001 + Math.pow(numberTwo, 1 / numberOne));
            } else if (sign == 6) {
                return Math.pow(numberOne, numberTwo);
            } else if (sign == 7) {

            }
        }
        function fillHistory() {
            let t = 0;
            ctx.textAlign = "left";
            ctx.font = "28px Courtier";
            ctx.fillStyle = "SeaGreen";
            for (let i = myHistory.length; i > -1; i = i - 1) {
                if (myHistory[i] != undefined && t < 9) {
                    ctx.fillText(myHistory[i], 200, t * 30 + 400);
                }
                t = t + 1;
            }
        }
        function fillSigns() {
            ctx.textAlign = "left";
            ctx.font = "28px Courtier";
            ctx.fillStyle = "SeaGreen";
            ctx.fillText("^", 100, 400);
            ctx.fillText("√", 100, 450);
            ctx.fillText("/", 100, 500);
            ctx.fillText("*", 100, 550);
            ctx.fillText("-", 100, 600);
            ctx.fillText("+", 100, 650);
            ctx.fillStyle = "Maroon";
            ctx.fillRect(80, 700 - (sign * 50), 3, 30);
            ctx.fillRect(130, 700 - (sign * 50), 3, 30);
            ctx.font = "20px Courtier";
            ctx.fillText("Instructions", 950, 50);
            ctx.font = "15px Courtier";
            ctx.fillText("Use up/down arrows to change the sign", 930, 100);
            ctx.fillText("Use left/right arrows to change the number", 900, 80);
            ctx.fillText("Press enter to save equation", 960, 120);




        }
        function NumberRefresh() {
            if (numberOne == undefined || numberOne == NaN) {
                numberOne = 0;
            }
            if (numberTwo == undefined || numberTwo == NaN) {
                numberTwo = 0;
            }
        }
        function draw() {
            ctx.fillStyle = "#eee";
            ctx.fillRect(180, 190, 960, 170);
            ctx.fillRect(180, 400, 960, 400);
            ctx.font = "100px Courtier";
            ctx.fillStyle = "SeaGreen";
            ctx.textAlign = "left";
            ctx.textBaseline = "top";
            ctx.fillText("Calculator 2.0", 100, 50);
            ctx.font = "30px Courtier";
            ctx.fillText("Just start typing. It's that easy.", 150, 150);
            ctx.fillStyle = "Black";
            ctx.font = "60px Courtier";
            let show = "";
            if (sign == 1) {
                show = "+";
            } else if (sign == 2) {
                show = "-";
            } else if (sign == 3) {
                show = "*";
            } else if (sign == 4) {
                show = "/";
            } else if (sign == 5) {
                show = "√";
            } else if (sign == 6) {
                show = "";
            } else if (sign == 7) {
                show = "";
            }
            if (sign == 5) {
                ctx.font = "30px Courtier";
            }
            if (highlighter == 1) {
                ctx.fillStyle = "Navy";
            } else {
                ctx.fillStyle = "SeaGreen";
            }
            ctx.fillText(numberOne, 200, 200);
            if (sign == 6) {
                ctx.font = "30px Courtier";
            } else {
                ctx.font = "60px Courtier";
            }
            if (highlighter == 2) {
                ctx.fillStyle = "Navy";
            } else {
                ctx.fillStyle = "SeaGreen";
            }
            let space;
            if (sign == 5) {
                space = String(numberOne).length * 15;
            } else {
                space = String(numberOne).length * 30;
            }
            ctx.fillText(show + " " + numberTwo, 220 + space, 200);
            ctx.fillStyle = "SeaGreen";
            ctx.textAlign = "right";
            ctx.textBaseline = "top";
            solution = answer();
            ctx.fillText(answer(), 1140, 260);
            fillSigns();
            if (history.length > 0) {
                fillHistory();
            }
            NumberRefresh();
        }
        var intervalId = setInterval(function () {
            ctx.clearRect(0, 0, 1200, 700);
            draw();
        }, 50);
    </script>
</body>

</html>