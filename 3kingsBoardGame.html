<!DOCTYPE html>
<html>

<head>
    <title>3 kings</title>
    <!-- this is the code that will allow icon to be visible in the title bar of the brower -->
    <link rel="icon" type="image/ico" href="WebsiteLogo2.png" />
    <!-- you can also say this:  <link rel="icon" type="image/png" href="location/image.png" /> -->
</head>

<body>
    <canvas id="canvas" width="650" height="520"></canvas>
    <script src="https://code.jquery.com/jquery-2.1.0.js"></script>

    <script>
        var canvas = document.getElementById("canvas");
        var ctx = canvas.getContext("2d");
        var lastKey = 0;
        var Territories = false;
        $("body").keydown(function (event) {
            // console.log(event.keyCode);
            lastKey = event.keyCode;
            if (lastKey == 84){
                if(Territories == false){
                    Territories = true;
                } else {
                    Territories = false;
                }
                lastKey = undefined;
            }
        });
    

        //Players controlled by the user
        var P1 = {
            x: 10,
            y: 410,
            space: "U",
            alive: true,
            move: function () {
                //Sets up repetative choice loop
                var validMove = false;
                while (validMove == false) {
                    var choice = Number(prompt("Do you want to move... \n1) Up \n2) Down \n3) Left \n4) Or right? \n\nPlease type the number of your choice."));
                    //Changes x or y value
                    if (choice == 1) {
                        P1.y = P1.y - 100;
                    } else if (choice == 2) {
                        P1.y = P1.y + 100;
                    } else if (choice == 3) {
                        P1.x = P1.x - 100;
                    } else if (choice == 4) {
                        P1.x = P1.x + 100;
                    }
                    //Checks for if player is on the board, and corrects mistakes
                    if (P1.x > 410) {
                        P1.x = P1.x - 100;
                    } else if (P1.y > 410) {
                        P1.y = P1.y - 100;
                    } else if (P1.x < 10) {
                        P1.x = P1.x + 100;
                    } else if (P1.x == P2.x && P1.y == P2.y) {
                        //This makes sure the player is not on top of another player, and corrects mistakes
                        if (choice == 1) {
                            P1.y = P1.y + 100;
                        } else if (choice == 2) {
                            P1.y = P1.y - 100;
                        } else if (choice == 3) {
                            P1.x = P1.x + 100;
                        } else if (choice == 4) {
                            P1.x = P1.x - 100;
                        }
                    } else if (P1.x == P3.x && P1.y == P3.y) {
                        //This makes sure the player is not on top of another player, and corrects mistakes
                        if (choice == 1) {
                            P1.y = P1.y + 100;
                        } else if (choice == 2) {
                            P1.y = P1.y - 100;
                        } else if (choice == 3) {
                            P1.x = P1.x + 100;
                        } else if (choice == 4) {
                            P1.x = P1.x - 100;
                        }
                    } else {
                        //This ensures the player actually moved
                        if (choice > 0 && choice < 5) {
                            validMove = true;
                        }
                    }
                }
            }
        };
        var P2 = {
            x: 210,
            y: 410,
            space: "W",
            alive: true,
            move: function () {
                //Sets up repetative choice loop
                var validMove = false;
                while (validMove == false) {
                    var choice = Number(prompt("Do you want to move... \n1) Up \n2) Down \n3) Left \n4) Or right? \n\nPlease type the number of your choice."));
                    //Changes x or y value
                    if (choice == 1) {
                        P2.y = P2.y - 100;
                    } else if (choice == 2) {
                        P2.y = P2.y + 100;
                    } else if (choice == 3) {
                        P2.x = P2.x - 100;
                    } else if (choice == 4) {
                        P2.x = P2.x + 100;
                    }
                    //Checks for if player is on the board, and corrects mistakes
                    if (P2.x > 410) {
                        P2.x = P2.x - 100;
                    } else if (P2.y > 410) {
                        P2.y = P2.y - 100;
                    } else if (P2.x < 10) {
                        P2.x = P2.x + 100;
                    } else if (P2.x == P1.x && P2.y == P1.y) {
                        //This makes sure the player is not on top of another player, and corrects mistakes
                        if (choice == 1) {
                            P2.y = P2.y + 100;
                        } else if (choice == 2) {
                            P2.y = P2.y - 100;
                        } else if (choice == 3) {
                            P2.x = P2.x + 100;
                        } else if (choice == 4) {
                            P2.x = P2.x - 100;
                        }
                    } else if (P2.x == P3.x && P2.y == P3.y) {
                        //This makes sure the player is not on top of another player, and corrects mistakes
                        if (choice == 1) {
                            P2.y = P2.y + 100;
                        } else if (choice == 2) {
                            P2.y = P2.y - 100;
                        } else if (choice == 3) {
                            P2.x = P2.x + 100;
                        } else if (choice == 4) {
                            P2.x = P2.x - 100;
                        }
                    } else {
                        //This ensures the player actually moved
                        if (choice > 0 && choice < 5) {
                            validMove = true;
                        }
                    }
                }
            }
        };
        var P3 = {
            x: 410,
            y: 410,
            space: "Y",
            alive: true,
            move: function () {
                //Sets up repetative choice loop
                var validMove = false;
                while (validMove == false) {
                    var choice = Number(prompt("Do you want to move... \n1) Up \n2) Down \n3) Left \n4) Or right? \n\nPlease type the number of your choice."));
                    //Changes x or y value
                    if (choice == 1) {
                        P3.y = P3.y - 100;
                    } else if (choice == 2) {
                        P3.y = P3.y + 100;
                    } else if (choice == 3) {
                        P3.x = P3.x - 100;
                    } else if (choice == 4) {
                        P3.x = P3.x + 100;
                    }
                    //Checks for if player is on the board, and corrects mistakes
                    if (P3.x > 410) {
                        P3.x = P3.x - 100;
                    } else if (P3.y > 410) {
                        P3.y = P3.y - 100;
                    } else if (P3.x < 10) {
                        P3.x = P3.x + 100;
                    } else if (P3.x == P1.x && P3.y == P1.y) {
                        //This makes sure the player is not on top of another player, and corrects mistakes
                        if (choice == 1) {
                            P3.y = P3.y + 100;
                        } else if (choice == 2) {
                            P3.y = P3.y - 100;
                        } else if (choice == 3) {
                            P3.x = P3.x + 100;
                        } else if (choice == 4) {
                            P3.x = P3.x - 100;
                        }
                    } else if (P3.x == P2.x && P3.y == P2.y) {
                        //This makes sure the player is not on top of another player, and corrects mistakes
                        if (choice == 1) {
                            P3.y = P3.y + 100;
                        } else if (choice == 2) {
                            P3.y = P3.y - 100;
                        } else if (choice == 3) {
                            P3.x = P3.x + 100;
                        } else if (choice == 4) {
                            P3.x = P3.x - 100;
                        }
                    } else {
                        //This ensures the player actually moved
                        if (choice > 0 && choice < 5) {
                            validMove = true;
                        }
                    }
                }
            }
        };



        var DecorX = 0;
        var PlayerCount = 0;
        var ComputerCount = 0;
        var PlayerSteps = 0;
        var ComputerSteps = 0;
        var drawInstructions = function() {
            //console.log("Drew instructions!");
            ctx.clearRect(0, 0, 650, 520);
            ctx.textBaseline = "top";
            ctx.font = "50px Courier";
            ctx.fillStyle = "Black";
            ctx.fillText("Instructions", 0, 0);
            ctx.font = "20px Arial";
            ctx.fillText("Object", 0, 55);
            ctx.font = "14px Courier";
            ctx.fillText("The object of the game is to get at least one of your pieces PAST the edge", 0, 75);
            ctx.fillText("of the board on the opposing side before the opposing team does likewise.", 0, 90);
            ctx.font = "20px Arial";
            ctx.fillText("Controls", 0, 105);
            ctx.font = "14px Courier";
            ctx.fillText("When it is your turn, select any piece to move by pressing the number key", 0, 125);
            ctx.fillText("corresponding with their name on-screen. You will then be asked how you want", 0, 140);
            ctx.fillText("to move the piece. You can move like a chess king, minus diagonals.", 0, 155);
            ctx.font = "20px Arial";
            ctx.fillText("Capturing Pieces", 0, 170);
            ctx.font = "13px Courier";
            ctx.fillText("If you land on a space an enemy piece is occupying, it will be removed from play.", 0, 190);
            ctx.font = "12px Courier";
            ctx.fillText("All possible moves              Formation tips             Defend your base!", 0, 365);
            ctx.fillText("In the formation example, Blue has a strong offence of 2 players and 1 player for defence.", 0, 400);
            ctx.fillText("Red has only 1 offence player and is mostly trapped in the corner, a weak formation.", 0, 413);
            ctx.font = "13px Arial";
            ctx.fillText("Having read the above directions, press the space bar to play the game.", 0, 505);
            DecorX = 0;
            for (var i = 1; i < 5; i++) {
                ctx.fillRect(DecorX, i * 30 + 210, 150, 2);
                ctx.fillRect(DecorX + i * 30, 210, 2, 150);
            }
            DecorX = 220;
            for (var i = 1; i < 5; i++) {
                ctx.fillRect(DecorX, i * 30 + 210, 150, 2);
                ctx.fillRect(DecorX + i * 30, 210, 2, 150);
            }
            DecorX = 420;
            for (var i = 1; i < 5; i++) {
                ctx.fillRect(DecorX, i * 30 + 210, 150, 2);
                ctx.fillRect(DecorX + i * 30, 210, 2, 150);
            }
            ctx.fillStyle = "Blue";
            //Moves
            ctx.fillRect(65, 275, 20, 20);
            //Formation
            ctx.fillRect(227, 275, 20, 20);
            ctx.fillRect(315, 275, 20, 20);
            ctx.fillRect(285, 335, 20, 20);
            //Defence
            ctx.fillRect(457, 334, 20, 20);
            ctx.fillStyle = "Green";
            ctx.fillRect(62, 242, 28, 28);
            ctx.fillRect(32, 272, 28, 28);
            ctx.fillRect(62, 302, 28, 28);
            ctx.fillRect(92, 272, 28, 28);
            ctx.fillRect(482, 332, 28, 28);
            ctx.fillStyle = "Red";
            //Formation
            ctx.fillRect(227, 215, 20, 20);
            ctx.fillRect(255, 215, 20, 20);
            ctx.fillRect(345, 245, 20, 20);
            //Defence on blue
            ctx.fillRect(515, 275, 20, 20);
            
        };
        //Drawing the board function
        var w = 1;
        var side = 0;
        //Territories = 1;
        var drawBoard = function () {
            //Set Player x and y values according to their space
            //Find out player Territory: Pink = Red, Cyan = Blue, and nothing means the space is nuetral.
            ctx.clearRect(0, 0, 650, 520);
            if(Territories == 1){
                //console.log("drawing territories!");
                for(var x = 10; x < 411; x = x + 100){
                    for(var y = 10; y < 411; y = y + 100){
                        side = 0;
                        if(P1.x == x && P1.y == y || P2.x == x && P2.y == y || P3.x == x && P3.y == y ){
                            ctx.fillStyle = "Cyan";
                            ctx.fillRect(x - 10, y - 10, 100, 100);
                        } else {
                            if(P4.x == x && P4.y == y || P5.x == x && P5.y == y || P6.x == x && P6.y == y ) {
                                ctx.fillStyle = "Pink";
                                ctx.fillRect(x - 10, y - 10, 100, 100);
                            } else {
                                if(P1.x == x && P1.y == y + 100 || P2.x == x && P2.y == y + 100 || P3.x == x && P3.y == y + 100 || P1.x == x && P1.y == y - 100 || P2.x == x && P2.y == y - 100 || P3.x == x && P3.y == y - 100 || P1.y == y && P1.x == x - 100 || P2.y == y && P2.x == x - 100 || P3.y == y && P3.x == x - 100 || P1.y == y && P1.x == x + 100 || P2.y == y && P2.x == P4.x + 100 || P3.y == y && P3.x == x + 100){
                                    side = side + 1;
                                }
                                if(P4.x == x && P4.y == y + 100 || P5.x == x && P5.y == y + 100 || P6.x == x && P6.y == y + 100 || P4.x == x && P4.y == y - 100 || P5.x == x && P5.y == y - 100 || P6.x == x && P6.y == y - 100 || P4.y == y && P4.x == x - 100 || P5.y == y && P5.x == x - 100 || P6.y == y && P6.x == x - 100 || P4.y == y && P4.x == x + 100 || P5.y == y && P5.x == P4.x + 100 || P6.y == y && P6.x == x + 100){
                                    side = side - 1
                                }
                                //Y axis
                                if(y > P4.y + 100 && y > P5.y + 100 && y > P6.y + 100){
                                    side = side + 1;
                                }
                                if(y < P1.y - 100 && y < P2.y - 100 && y < P3.y - 100){
                                    side = side - 1;
                                }
                                if(y > P1.y + 100 && y > P2.y + 100 && y > P3.y + 100){
                                    side = side - 1;
                                }
                                if(y < P4.y - 100 && y < P5.y - 100 && y < P6.y - 100){
                                    side = side + 1;
                                }
                                //X axis
                                if(x > P4.x + 100 && x > P5.x + 100 && x > P6.x + 100){
                                    side = side + 1;
                                }
                                if(x < P1.x - 100 && x < P2.x - 100 && x < P3.x - 100){
                                    side = side - 1;
                                }
                                if(x > P1.x + 100 && x > P2.x + 100 && x > P3.x + 100){
                                    side = side - 1;
                                }
                                if(x < P4.x - 100 && x < P5.x - 100 && x < P6.x - 100){
                                    side = side + 1;
                                }
                                if(side > 0){
                                    ctx.fillStyle = "Cyan";
                                    ctx.fillRect(x - 10, y - 10, 100, 100);
                                }
                                if(side < 0){
                                    ctx.fillStyle = "Pink";
                                    ctx.fillRect(x - 10, y - 10, 100, 100);
                                }
                            }
                        }
                    }
                }
            }
            //Draw grid
            // console.log("Drew board!")
            ctx.fillStyle = "Black";
            for (var i = 1; i < 6; i++) {
                ctx.fillRect(0, i * 100, 500, 2);
                ctx.fillRect(i * 100, 0, 2, 500);
            }
            //Draw key letters
            ctx.fillStyle = "Black";
            ctx.textBaseline = "top";
            ctx.font = "14px Courier";
            ctx.fillText("A           B           C           D           E", 0, 0);
            ctx.fillText("F           G           H           I           J", 0, 100);
            ctx.fillText("K           L           M           N           O", 0, 200);
            ctx.fillText("P           Q           R           S           T", 0, 300);
            ctx.fillText("U           V           W           X           Y", 0, 400);
            ctx.fillText("This game was developed by Arthur Z 1/6/2019.", 0, 503);
            ctx.font = "12px Courier";
            ctx.fillText("Press 'T' to toggle territories!", 420, 503);
            //Draw players
            ctx.fillStyle = "Blue";
            ctx.fillRect(P1.x, P1.y, 30, 30);
            ctx.fillText("Player1", P1.x, P1.y + 30);
            ctx.fillRect(P2.x, P2.y, 30, 30);
            ctx.fillText("Player2", P2.x, P2.y + 30);
            ctx.fillRect(P3.x, P3.y, 30, 30);
            ctx.fillText("Player3", P3.x, P3.y + 30);
            ctx.fillStyle = "Red";
            ctx.fillRect(P4.x, P4.y, 30, 30);
            //ctx.fillText("Player4", P4.x, P4.y + 30);
            ctx.fillRect(P5.x, P5.y, 30, 30);
            //ctx.fillText("Player5", P5.x, P5.y + 30);
            ctx.fillRect(P6.x, P6.y, 30, 30);
            //ctx.fillText("Player6", P6.x, P6.y + 30);


            //Calculate scores
            //Players alive on each team
            PlayerCount = 0;
            ComputerCount = 0;
            if (P1.alive == true) {
                PlayerCount = PlayerCount + 1;
            }
            if (P2.alive == true) {
                PlayerCount = PlayerCount + 1;
            }
            if (P3.alive == true) {
                PlayerCount = PlayerCount + 1;
            }
            if (P4.alive == true) {
                ComputerCount = ComputerCount + 1;
            }
            if (P5.alive == true) {
                ComputerCount = ComputerCount + 1;
            }
            if (P6.alive == true) {
                ComputerCount = ComputerCount + 1;
            }
            ctx.textBaseline = "top";
            ctx.font = "30px Courier";
            ctx.fillStyle = "Red";
            ctx.fillText(ComputerCount, 502, 0);
            ctx.fillStyle = "Black";
            ctx.fillText("-", 530, 0);
            ctx.fillStyle = "Blue";
            ctx.fillText(PlayerCount, 560, 0);
            if (ComputerCount == PlayerCount) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 200);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 280, 60, 200);
                ctx.fillStyle = "White";
                ctx.fillText("50%", 510, 180);
                ctx.fillText("50%", 510, 380);
            }
            if (ComputerCount == 3 && PlayerCount == 2) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 240);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 320, 60, 160);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("60%", 510, 200);
                //For blue
                ctx.fillText("40%", 510, 380);
            }
            if (ComputerCount == 2 && PlayerCount == 3) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 160);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 240, 60, 240);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("40%", 510, 160);
                //For blue
                ctx.fillText("60%", 510, 380);
            }
            if (ComputerCount == 3 && PlayerCount == 1) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 300);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 380, 60, 100);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("75%", 510, 150 + 80);
                //For blue
                ctx.fillText("25%", 510, 380 + 50);
            }
            if (ComputerCount == 1 && PlayerCount == 3) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 100);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 180, 60, 300);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("25%", 510, 130);
                //For blue
                ctx.fillText("75%", 510, 150 + 180);
            }
            if (ComputerCount == 1 && PlayerCount == 2) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 133);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 80 + 133, 60, 266);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("33%", 510, 133 / 2 + 80);
                //For blue
                ctx.fillText("66%", 510, 133 / 2 + 80 + 266 / 2);
            }
            if (ComputerCount == 2 && PlayerCount == 1) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 266);
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 80 + 266, 60, 133);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("33%", 510, 133 / 2 + 80 + 266 / 2);
                //For blue
                ctx.fillText("66%", 510, 266 / 2);
            }
            if (ComputerCount == 0 && PlayerCount > 0) {
                ctx.fillStyle = "Blue";
                ctx.fillRect(510, 80, 60, 3400);
                ctx.fillStyle = "White";
                //For blue
                ctx.fillText("100%", 510, 280);
            }
            if (ComputerCount > 0 && PlayerCount == 0) {
                ctx.fillStyle = "Red";
                ctx.fillRect(510, 80, 60, 340);
                ctx.fillStyle = "White";
                //For red
                ctx.fillText("100%", 510, 280);
            }
            if (winner == 1){
                ctx.clearRect(0, 0, 650, 520);
                //P1.alive = false;
                //P2.alive = false;
                //P3.alive = false;
                ctx.textBaseline = "top";
                ctx.font = "50px Courier";
                ctx.fillStyle = "Blue";
                ctx.fillText("Blue victory", 10, 205);
                ctx.font = "14px Courier";
                if (Instructions == 32){
                ctx.fillText("When starting a game, press the '0' key to play 2nd!", 10, 300);
                } else if (Instructions == 48){
                ctx.fillText("Playing 2nd was a little easier, wasn't it?", 10, 300);
                }
                ctx.fillStyle = "Black";
                w = 1;
                ctx.fillText("Here are your accomplishments for this game round:", 10, 315);
                if(P1.alive == true && P2.alive == true && P3.alive == true){
                    ctx.fillText("Achievement A: You kept all of your players alive", 10, 315 + 15 * w);
                    w = w + 1;
                }
                if(P4.alive == true && P5.alive == true && P6.alive == true){
                    ctx.fillText("Achievement B: You were a peacemaker, keeping all opponents alive", 10, 315 + 15 * w);
                    w = w + 1;
                }
                if(P4.alive == false && P5.alive == false && P6.alive == false){
                    ctx.fillText("Achievement C: You killed all of the computer's players", 10, 315 + 15 * w);
                    w = w + 1;
                }
                if(P1.y < 211 && P2.y < 211 && P3.y < 211){
                    ctx.fillText("Achievement D: All of your players reached the midcourt line", 10, 315 + 15 * w);
                    w = w + 1;
                }
                if(P4.y == 510 || P5.y == 510 || P6.y == 510){
                    ctx.fillText("Achievement E: It was a close race, as the computer was 1 turn away from winning.", 10, 315 + 15 * w);
                    w = w + 1;
                }
                if(TurnNum < 13){
                    ctx.fillText("Achievement F: You won under 13 turns", 10, 315 + 15 * w);
                    w = w + 1;
                }
                if(w == 1){
                    ctx.fillText("     No achievements earned", 10, 345);
                    w = w + 1;
                }

            }
            if (winner == 2){
                P1.alive = false;
                P2.alive = false;
                P3.alive = false;
                ctx.clearRect(0, 0, 650, 520);
                ctx.textBaseline = "top";
                ctx.font = "50px Courier";
                ctx.fillStyle = "Red";
                ctx.fillText("Red victory", 10, 205);
            }
        }



        var FirstCaller = 0;
        var ComputerDirection = "undefined";
        //Computerized users
        var P4 = {
            x: 10,
            y: 10,
            space: "A",
            alive: true,
            played: false,
            play: function () {
                P4.played = true;
                if(P4.y == 410){
                    P4.y = P4.y + 100;
                }
                else if (P1.x == P4.x && P1.y == P4.y + 100 || P2.x == P4.x && P2.y == P4.y + 100 || P3.x == P4.x && P3.y == P4.y + 100) {
                    P4.y = P4.y + 100;
                    ComputerDirection = "down";
                } else if (P1.x == P4.x && P1.y == P4.y - 100 || P2.x == P4.x && P2.y == P4.y - 100 || P3.x == P4.x && P3.y == P4.y - 100) {
                    P4.y = P4.y - 100;
                    ComputerDirection = "up";
                } else if (P1.y == P4.y && P1.x == P4.x - 100 || P2.y == P4.y && P2.x == P4.x - 100 || P3.y == P4.y && P3.x == P4.x - 100) {
                    P4.x = P4.x - 100;
                    ComputerDirection = "left";
                } else if (P1.y == P4.y && P1.x == P4.x + 100 || P2.y == P4.y && P2.x == P4.x + 100 || P3.y == P4.y && P3.x == P4.x + 100) {
                    P4.x = P4.x + 100;
                    ComputerDirection = "right";
                } else {
                    P4.y = P4.y + 100;
                    if (P4.x < 10 || P4.x > 410 || P4.y < 10 || /*Left: checks the borders*/P4.x == P5.x && P4.y == P5.y || P4.x == P6.x && P4.y == P6.y /*Left: checks for overlapping of red players*/ || P1.x == P4.x && P1.y == P4.y + 100 || P2.x == P4.x && P2.y == P4.y + 100 || P3.x == P4.x && P3.y == P4.y + 100 || P1.x == P4.x && P1.y == P4.y - 100 || P2.x == P4.x && P2.y == P4.y - 100 || P3.x == P4.x && P3.y == P4.y - 100 || P1.y == P4.y && P1.x == P4.x - 100 || P2.y == P4.y && P2.x == P4.x - 100 || P3.y == P4.y && P3.x == P4.x - 100 || P1.y == P4.y && P1.x == P4.x + 100 || P2.y == P4.y && P2.x == P4.x + 100 || P3.y == P4.y && P3.x == P4.x + 100) {
                        //DON'T advance, go back to original spot
                        P4.y = P4.y - 100;
                        //Try the left!
                        P4.x = P4.x - 100;
                        if (P4.x < 10 || P4.x > 410 || P4.y < 10 || /*Left: checks the borders*/P4.x == P5.x && P4.y == P5.y || P4.x == P6.x && P4.y == P6.y /*Left: checks for overlapping of red players*/ || P1.x == P4.x && P1.y == P4.y + 100 || P2.x == P4.x && P2.y == P4.y + 100 || P3.x == P4.x && P3.y == P4.y + 100 || P1.x == P4.x && P1.y == P4.y - 100 || P2.x == P4.x && P2.y == P4.y - 100 || P3.x == P4.x && P3.y == P4.y - 100 || P1.y == P4.y && P1.x == P4.x - 100 || P2.y == P4.y && P2.x == P4.x - 100 || P3.y == P4.y && P3.x == P4.x - 100 || P1.y == P4.y && P1.x == P4.x + 100 || P2.y == P4.y && P2.x == P4.x + 100 || P3.y == P4.y && P3.x == P4.x + 100) {
                            //DON'T go left, go back to original spot
                            P4.x = P4.x + 100;
                            //Try the right!
                            P4.x = P4.x + 100;
                            if (P4.x < 10 || P4.x > 410 || P4.y < 10 || /*Left: checks the borders*/P4.x == P5.x && P4.y == P5.y || P4.x == P6.x && P4.y == P6.y /*Left: checks for overlapping of red players*/ || P1.x == P4.x && P1.y == P4.y + 100 || P2.x == P4.x && P2.y == P4.y + 100 || P3.x == P4.x && P3.y == P4.y + 100 || P1.x == P4.x && P1.y == P4.y - 100 || P2.x == P4.x && P2.y == P4.y - 100 || P3.x == P4.x && P3.y == P4.y - 100 || P1.y == P4.y && P1.x == P4.x - 100 || P2.y == P4.y && P2.x == P4.x - 100 || P3.y == P4.y && P3.x == P4.x - 100 || P1.y == P4.y && P1.x == P4.x + 100 || P2.y == P4.y && P2.x == P4.x + 100 || P3.y == P4.y && P3.x == P4.x + 100) {
                                //Don't go right, go back to original spot
                                P4.x = P4.x - 100;
                                //Call for help
                                if (P6.alive == true && P6.played == false) {
                                    P6.play();
                                } else if (P1.y == P5.y + 100 && P1.x == P5.x - 200 || P1.y == P5.y + 200 && P1.x == P5.x - 300 || P2.y == P5.y + 100 && P2.x == P5.x - 200 || P2.y == P5.y + 200 && P2.x == P5.x - 300 || P3.y == P5.y + 100 && P3.x == P5.x + 200 || P3.y == P5.y + 200 && P3.x == P5.x + 300 || P2.y == P5.y + 100 && P2.x == P5.x + 200 || P2.y == P5.y + 200 && P2.x == P5.x + 300 || P3.y == P5.y + 100 && P3.x == P5.x - 200 || P3.y == P5.y + 200 && P3.x == P5.x - 300 || P1.y == P5.y + 100 && P1.x == P5.x + 200 || P1.y == P5.y + 200 && P1.x == P5.x + 300) {
                                    P5.play();
                                } else{
                    
                                    //Player is forced to retreat
                                    P4.y = P4.y - 100;
                                    if (P4.x < 10 || P4.x > 410 || P4.y < 10 || /*Left: checks the borders*/P4.x == P5.x && P4.y == P5.y || P4.x == P6.x && P4.y == P6.y /*Left: checks for overlapping of red players*/ || P1.x == P4.x && P1.y == P4.y + 100 || P2.x == P4.x && P2.y == P4.y + 100 || P3.x == P4.x && P3.y == P4.y + 100 || P1.x == P4.x && P1.y == P4.y - 100 || P2.x == P4.x && P2.y == P4.y - 100 || P3.x == P4.x && P3.y == P4.y - 100 || P1.y == P4.y && P1.x == P4.x - 100 || P2.y == P4.y && P2.x == P4.x - 100 || P3.y == P4.y && P3.x == P4.x - 100 || P1.y == P4.y && P1.x == P4.x + 100 || P2.y == P4.y && P2.x == P4.x + 100 || P3.y == P4.y && P3.x == P4.x + 100) {
                                        //The player can't retreat. We will call for help from P5. 
                                        P4.y = P4.y + 100;
                                        if(P5.alive == true){
                                            P5.play();
                                        } else{
                                            //It is best to charge foreward.
                                            P4.y = P4.y + 100;
                                        }
                                    } else {
                                        //retreat works
                                    }

                                }
                            } else {
                                //Go to the right; stay at new spot
                            }

                        } else {
                            //Go to the left; stay at new spot
                        }

                    } else {
                        //advance foreward; stay at the new spot
                        ComputerDirection = "down";
                    }
                }
            }
        };





        
        var P5 = {
            x: 210,
            y: 10,
            space: "C",
            alive: true,
            played: false,
            forceMove: function () {
                console.log("Force move");
                if (P6.played == false) {
                    P6.play();
                } else if (P4.played == false) {
                    P4.play();
                } else {
                    //The player MUST move. Player will first check if he can move foreward.
                    P5.y = P5.y + 100;
                    if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                        //Can't move foreward. Undos move.
                        P5.y = P5.y - 100;
                        if (P5.x < 210) {
                            //Checking to see if moving right is possible
                            P5.x = P5.x + 100;
                            if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                //Trying out left, and undoing in 1 line
                                P5.x = P5.x - 200;
                                if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                    //We must move backwards, if physically possible
                                    P5.x = P5.x + 100;
                                    P5.y = P5.y - 100;
                                    if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                        //We must go foreward
                                        P5.y = P5.y + 200;
                                        console.log("Code 5A");
                                    } else {
                                        //moving backwards worked!
                                        console.log("Code 5B");
                                    }
                                }
                            } else {
                                console.log("Code 5C");
                                //Moving right worked
                            }

                        } else if (P5.x > 210) {
                            //Checking to see if moving left is possible
                            P5.x = P5.x - 100;
                            if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                //Checking backwards
                                P5.x = P5.x + 100;
                                P5.y = P5.y - 100;
                                if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                    //Trying the right
                                    P5.y = P5.y + 100;
                                    P5.x = P5.x + 100;
                                    if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                        //Right failed, Left failed, and Backwards failed. Forced to go straight.
                                        P5.x = P5.x - 100;
                                        P5.y = P5.y + 100;
                                        console.log("Code 5D");
                                    } else {
                                        //Going right worked
                                        console.log("Code 5E");
                                    }
                                } else {
                                    //It worked, we went backwards!
                                    console.log("Code 5F");
                                }
                            } else {
                                //Moving Left Worked, stay there!
                                console.log("Code 5G");
                            }

                        } else {
                            //Here, we want to move backwards, as we already know we are in the center.
                            P5.y = P5.y - 100;
                            if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                //Undos move
                                P5.y = P5.y + 100;
                                //Trying right
                                P5.x = P5.x + 100;
                                if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                    //Undos move
                                    P5.x = P5.x - 100;
                                    //We must go left
                                    P5.x = P5.x - 100;
                                    console.log("Code 5H");
                                } else {
                                    //Moving right worked
                                    console.log("Code 5I");
                                }
                            } else {
                                //Moving backwards worked, stay here.
                                console.log("Code 5J");
                            }
                        }
                    } else {
                        //Foreward is good, so that is the final move.
                        console.log("Code 5K");
                    }
                }
            },
            play: function () {

                P5.played = true;
                if(P5.y == 410){
                    P5.y = P5.y + 100;
                }
                else if (P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100) {
                    P5.y = P5.y + 100;
                    ComputerDirection = "down";
                    console.log("Original capture");
                } else if (P5.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100) {
                    P5.y = P5.y - 100;
                    ComputerDirection = "up";
                    console.log("Original capture");
                } else if (P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100) {
                    P5.x = P5.x - 100;
                    ComputerDirection = "left";
                    console.log("Original capture");
                } else if (P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                    P5.x = P5.x + 100;
                    ComputerDirection = "right";
                    console.log("Original capture");
                    //The next two scenarios are purely for defence.
                } else if (P1.y == P5.y + 100 && P1.x == P5.x - 200 || P1.y == P5.y + 200 && P1.x == P5.x - 300 || P2.y == P5.y + 100 && P2.x == P5.x - 200 || P2.y == P5.y + 200 && P2.x == P5.x - 300 || P3.y == P5.y + 100 && P3.x == P5.x - 200 || P3.y == P5.y + 200 && P3.x == P5.x - 300) {
                    P5.x = P5.x - 100;
                    if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                        //Undos move
                        P5.x = P5.x - 100;
                        if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                            P5.x = P5.x + 100;
                            if (P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y){
                                P5.x = P5.x + 100;
                                P5.forceMove();
                            } else {
                                console.log("Defence Left");
                                //It worked
                            }
                        } else {
                        P5.forceMove();
                        }
                    }
                } else if (P3.y == P5.y + 100 && P3.x == P5.x + 200 || P3.y == P5.y + 200 && P3.x == P5.x + 300 || P2.y == P5.y + 100 && P2.x == P5.x + 200 || P2.y == P5.y + 200 && P2.x == P5.x + 300 || P1.y == P5.y + 100 && P1.x == P5.x + 200 || P1.y == P5.y + 200 && P1.x == P5.x + 300) {
                    //Move to defence
                    P5.x = P5.x + 100;
                    if (P5.x < 10 || P5.x > 410 || P5.y < 10 || /*Left: checks the borders*/P5.x == P6.x && P5.y == P6.y || P5.x == P4.x && P5.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P5.x && P1.y == P5.y + 100 || P2.x == P5.x && P2.y == P5.y + 100 || P3.x == P5.x && P3.y == P5.y + 100 || P1.x == P5.x && P1.y == P5.y - 100 || P2.x == P5.x && P2.y == P5.y - 100 || P3.x == P5.x && P3.y == P5.y - 100 || P1.y == P5.y && P1.x == P5.x - 100 || P2.y == P5.y && P2.x == P5.x - 100 || P3.y == P5.y && P3.x == P5.x - 100 || P1.y == P5.y && P1.x == P5.x + 100 || P2.y == P5.y && P2.x == P5.x + 100 || P3.y == P5.y && P3.x == P5.x + 100) {
                                P5.x = P5.x - 100;
                                P5.forceMove();
                            } else {
                                //Stay where you are
                                console.log("Defence Right");
                            }
                } else {
                    P5.forceMove();
                }
            }
        };


        var P6 = {
            x: 410,
            y: 10,
            space: "E",
            alive: true,
            played: false,
            play: function () {
                P6.played = true;
                if(P6.y == 410){
                    P6.y = P6.y + 100;
                }
                else if (P1.x == P6.x && P1.y == P6.y + 100 || P2.x == P6.x && P2.y == P6.y + 100 || P3.x == P6.x && P3.y == P6.y + 100) {
                    P6.y = P6.y + 100;
                    ComputerDirection = "down";
                } else if (P6.x == P6.x && P1.y == P6.y - 100 || P2.x == P6.x && P2.y == P6.y - 100 || P3.x == P6.x && P3.y == P6.y - 100) {
                    P6.y = P6.y - 100;
                    ComputerDirection = "up";
                } else if (P1.y == P6.y && P1.x == P6.x - 100 || P2.y == P6.y && P2.x == P6.x - 100 || P3.y == P6.y && P3.x == P6.x - 100) {
                    P6.x = P6.x - 100;
                    ComputerDirection = "left";
                } else if (P1.y == P6.y && P1.x == P6.x + 100 || P2.y == P6.y && P2.x == P6.x + 100 || P3.y == P6.y && P3.x == P6.x + 100) {
                    P6.x = P6.x + 100;
                    ComputerDirection = "right";
                } else {
                    P6.y = P6.y + 100;
                    if (P6.x < 10 || P6.x > 410 || P6.y < 10 || /*Left: checks the borders*/P6.x == P5.x && P6.y == P5.y || P6.x == P4.x && P6.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P6.x && P1.y == P6.y + 100 || P2.x == P6.x && P2.y == P6.y + 100 || P3.x == P6.x && P3.y == P6.y + 100 || P1.x == P6.x && P1.y == P6.y - 100 || P2.x == P6.x && P2.y == P6.y - 100 || P3.x == P6.x && P3.y == P6.y - 100 || P1.y == P6.y && P1.x == P6.x - 100 || P2.y == P6.y && P2.x == P6.x - 100 || P3.y == P6.y && P3.x == P6.x - 100 || P1.y == P6.y && P1.x == P6.x + 100 || P2.y == P6.y && P2.x == P6.x + 100 || P3.y == P6.y && P3.x == P6.x + 100) {
                        //DON'T advance, go back to original spot
                        P6.y = P6.y - 100;
                        //Try the right!
                        P6.x = P6.x + 100;
                        if (P6.x < 10 || P6.x > 410 || P6.y < 10 || /*Left: checks the borders*/P6.x == P5.x && P6.y == P5.y || P6.x == P4.x && P6.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P6.x && P1.y == P6.y + 100 || P2.x == P6.x && P2.y == P6.y + 100 || P3.x == P6.x && P3.y == P6.y + 100 || P1.x == P6.x && P1.y == P6.y - 100 || P2.x == P6.x && P2.y == P6.y - 100 || P3.x == P6.x && P3.y == P6.y - 100 || P1.y == P6.y && P1.x == P6.x - 100 || P2.y == P6.y && P2.x == P6.x - 100 || P3.y == P6.y && P3.x == P6.x - 100 || P1.y == P6.y && P1.x == P6.x + 100 || P2.y == P6.y && P2.x == P6.x + 100 || P3.y == P6.y && P3.x == P6.x + 100) {
                            //DON'T go right, go back to original spot
                            P6.x = P6.x - 100;
                            //Try the left!
                            P6.x = P6.x - 100;
                            if (P6.x < 10 || P6.x > 410 || P6.y < 10 || /*Left: checks the borders*/P6.x == P5.x && P6.y == P5.y || P6.x == P4.x && P6.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P6.x && P1.y == P6.y + 100 || P2.x == P6.x && P2.y == P6.y + 100 || P3.x == P6.x && P3.y == P6.y + 100 || P1.x == P6.x && P1.y == P6.y - 100 || P2.x == P6.x && P2.y == P6.y - 100 || P3.x == P6.x && P3.y == P6.y - 100 || P1.y == P6.y && P1.x == P6.x - 100 || P2.y == P6.y && P2.x == P6.x - 100 || P3.y == P6.y && P3.x == P6.x - 100 || P1.y == P6.y && P1.x == P6.x + 100 || P2.y == P6.y && P2.x == P6.x + 100 || P3.y == P6.y && P3.x == P6.x + 100) {
                                //Don't go left, go back to original spot
                                P6.x = P6.x + 100;
                                //Call for help, retreating is usually bad.
                                if (P4.alive == true && P4.played == false) {
                                    P4.play();
                                } else if(P1.y == P5.y + 100 && P1.x == P5.x - 200 || P1.y == P5.y + 200 && P1.x == P5.x - 300 || P2.y == P5.y + 100 && P2.x == P5.x - 200 || P2.y == P5.y + 200 && P2.x == P5.x - 300 || P3.y == P5.y + 100 && P3.x == P5.x + 200 || P3.y == P5.y + 200 && P3.x == P5.x + 300 || P2.y == P5.y + 100 && P2.x == P5.x + 200 || P2.y == P5.y + 200 && P2.x == P5.x + 300 || P3.y == P5.y + 100 && P3.x == P5.x - 200 || P3.y == P5.y + 200 && P3.x == P5.x - 300 || P1.y == P5.y + 100 && P1.x == P5.x + 200 || P1.y == P5.y + 200 && P1.x == P5.x + 300) {
                                    P5.play();
                                } else {
                                    //Try retreating
                                    P6.y = P6.y - 100;
                                    if (P6.x < 10 || P6.x > 410 || P6.y < 10 || /*Left: checks the borders*/P6.x == P5.x && P6.y == P5.y || P6.x == P4.x && P6.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P6.x && P1.y == P6.y + 100 || P2.x == P6.x && P2.y == P6.y + 100 || P3.x == P6.x && P3.y == P6.y + 100 || P1.x == P6.x && P1.y == P6.y - 100 || P2.x == P6.x && P2.y == P6.y - 100 || P3.x == P6.x && P3.y == P6.y - 100 || P1.y == P6.y && P1.x == P6.x - 100 || P2.y == P6.y && P2.x == P6.x - 100 || P3.y == P6.y && P3.x == P6.x - 100 || P1.y == P6.y && P1.x == P6.x + 100 || P2.y == P6.y && P2.x == P6.x + 100 || P3.y == P6.y && P3.x == P6.x + 100) {
                                        //Try calling P5.
                                        P6.y = P6.y + 100;
                                        if (P5.alive == true){
                                            P5.play();
                                        } else {
                                        //Player is doomed to die without help, so it is best to move foreward.
                                        P6.y = P6.y + 100;
                                        }
                                    }
                                }
                            } else {
                                //Go to the left; stay at new spot
                            }

                        } else {
                            //Go to the right; stay at new spot
                        }

                    } else {
                        //advance foreward; stay at the new spot
                        ComputerDirection = "down";
                    }
                }
            }
        };















        var winner = 0;
        var chip = 0;
        drawBoard();
        //gameloop
        // console.log("entering game loop");
        // console.log("P1 alive: " + P1.alive + " P2 alive: " + P2.alive + " P3 alive: " + P3.alive);
        var ValidMove = false;

        var PlayerTurn = function () {
            drawBoard();
            // console.log("starting player turn");
            //Player turn
            ValidMove = false;
            // console.log("checking for valid move.")
            if (chip == 0) {
                // console.log("getting chip from lastKey: " + lastKey);
                chip = Number(lastKey);
            }
            lastKey = 0;
            // console.log("Chip code: " + chip);
            if (chip == 49 && P1.alive == true) {
                ValidMove = true;
                P1.move();
            } else if (chip == 50 && P2.alive == true) {
                ValidMove = true;
                P2.move();
            } else if (chip == 51 && P3.alive == true) {
                ValidMove = true;
                P3.move();
            } else {
                chip = 0;
            }
            //Checking to see if an opponent was killed
            if (ValidMove == true) {
                if (P1.x == P4.x && P1.y == P4.y || P2.x == P4.x && P2.y == P4.y || P3.x == P4.x && P3.y == P4.y) {
                    P4.alive = false;
                }
                if (P1.x == P5.x && P1.y == P5.y || P2.x == P5.x && P2.y == P5.y || P3.x == P5.x && P3.y == P5.y) {
                    P5.alive = false;
                }
                if (P1.x == P6.x && P1.y == P6.y || P2.x == P6.x && P2.y == P6.y || P3.x == P6.x && P3.y == P6.y) {
                    P6.alive = false;
                }
            }
            //Getting rid of killed opponents
            if (P4.alive == false) {
                P4.x = 9000;
                P4.y = -9000;
            }
            if (P5.alive == false) {
                P5.x = 9000;
                P5.y = -9000;
            }
            if (P6.alive == false) {
                P6.x = 9000;
                P6.y = -9000;
            }
            if (ValidMove == true) {
                drawBoard();
            }
            //End of player loop. If the turn was carried out, the computer will go. If not, the turn will be skipped.
        };
        var ComputerTurn = function () {
            //Computer turn
            // console.log("Entering computer turn");
            //Set all played values to false
            P4.played = false;
            P5.played = false;
            P6.played = false;
            //Check to see if an enemy can be killed with P4 or P6
            if (P6.x < 10 || P6.y > 410 || P6.y < 10 || /*Left: checks the borders*/P6.x == P5.x && P6.y == P5.y || P6.x == P4.x && P6.y == P4.y /*Left: checks for overlapping of red players*/ || P1.x == P6.x && P1.y == P6.y + 100 || P2.x == P6.x && P2.y == P6.y + 100 || P3.x == P6.x && P3.y == P6.y + 100 || P1.x == P6.x && P1.y == P6.y - 100 || P2.x == P6.x && P2.y == P6.y - 100 || P3.x == P6.x && P3.y == P6.y - 100 || P1.y == P6.y && P1.x == P6.x - 100 || P2.y == P6.y && P2.x == P6.x - 100 || P3.y == P6.y && P3.x == P6.x - 100 || P1.y == P6.y && P1.x == P6.x + 100 || P2.y == P6.y && P2.x == P6.x + 100 || P3.y == P6.y && P3.x == P6.x + 100) {
                P6.play();
            } else  if (P4.x < 10 || P4.y > 410 || P4.y < 10 || /*Left: checks the borders*/P4.x == P5.x && P4.y == P5.y || P4.x == P6.x && P4.y == P6.y /*Left: checks for overlapping of red players*/ || P1.x == P4.x && P1.y == P4.y + 100 || P2.x == P4.x && P2.y == P4.y + 100 || P3.x == P4.x && P3.y == P4.y + 100 || P1.x == P4.x && P1.y == P4.y - 100 || P2.x == P4.x && P2.y == P4.y - 100 || P3.x == P4.x && P3.y == P4.y - 100 || P1.y == P4.y && P1.x == P4.x - 100 || P2.y == P4.y && P2.x == P4.x - 100 || P3.y == P4.y && P3.x == P4.x - 100 || P1.y == P4.y && P1.x == P4.x + 100 || P2.y == P4.y && P2.x == P4.x + 100 || P3.y == P4.y && P3.x == P4.x + 100) {
                P4.play();
            } else if(P4.y == 410){
                P4.play();
            } else if(P6.y == 410){
                P6.play();
            } else {
                if(P5.alive == true){
                    P5.play();
                } else if(P4.alive == true){
                    P4.play();
                } else {
                    P6.play();
                }
            }

           // P4.play();
            //Getting rid of dead players belonging to the human
            if (P1.x == P4.x && P1.y == P4.y || P1.x == P5.x && P1.y == P5.y || P1.x == P6.x && P1.y == P6.y) {
                P1.alive = false;
            }
            if (P2.x == P4.x && P2.y == P4.y || P2.x == P5.x && P2.y == P5.y || P2.x == P6.x && P2.y == P6.y) {
                P2.alive = false;
            }
            if (P3.x == P4.x && P3.y == P4.y || P3.x == P5.x && P3.y == P5.y || P3.x == P6.x && P3.y == P6.y) {
                P3.alive = false;
            }
            if (P1.alive == false) {
                P1.x = 9000;
                P1.y = 9000;
            }
            if (P2.alive == false) {
                P2.x = 9000;
                P2.y = 9000;
            }
            if (P3.alive == false) {
                P3.x = 9000;
                P3.y = 9000;
            }
            //Before the player's turn, we re-draw the board.
            // console.log("Ended computer turn")
            //We must make sure cheating is not permitted.
            if(P5.x < 10){
                P5.x = 10;
            }
            if(P5.x > 410){
                P5.x = 410;
            }
            if(P4.x < 10){
                P4.x = 10;
            }
            if(P4.x > 410){
                P4.x = 410;
            }
            if(P6.x < 10){
                P6.x = 10;
            }
            if(P6.x > 410){
                P6.x = 410;
            }
            drawBoard();
            //Repeat turns
        };
        var TurnNum = 1;
        var Com1stTurn = false;
        var Instructions = 0;
        var GameLoop = function () {

            if (Instructions != 32 && Instructions != 48) {
                Instructions = Number(lastKey);
                drawInstructions();
                //console.log("done drawing instructions");
            }

            if (Instructions == 32){
                // console.log("PlayerTurn!");
                console.log(lastKey);
                // console.log("chip: " + chip)
                PlayerTurn();   
                if(P1.y < 10 || P2.y < 10 || P3.y < 10){
                    if (winner == 0){
                    winner = 1;
                    console.log("Blue wins!");
                    }
                }
                if (ValidMove == true) {
                    chip = 0;
                    ComputerTurn();
                    if(P4.y > 410 || P5.y > 410 || P6.y > 410){
                        if (winner == 0){
                        winner = 2;
                        console.log("Red won...");
                        }
                    }
                    TurnNum = TurnNum + 1;
                    //x%2 = odd or even
                } else {/*repeat the player's turn*/}
            }

            //In this version, the computer plays first
            if (Instructions == 48){
                // console.log("PlayerTurn!");
                if(P4.played == false && P5.played == false && P6.played == false && Com1stTurn == false){
                    ComputerTurn();
                    Com1stTurn == true;
                }
                console.log(lastKey);
                // console.log("chip: " + chip)
                ValidMove = false;
                PlayerTurn();   
                if(P1.y < 10 || P2.y < 10 || P3.y < 10){
                    if (winner == 0){
                    winner = 1;
                    console.log("Blue wins!");
                    }
                }
                if (ValidMove == true) {
                    chip = 0;
                    ComputerTurn();
                    if(P4.y > 410 || P5.y > 410 || P6.y > 410){
                        if (winner == 0){
                        winner = 2;
                        console.log("Red won...");
                        }
                    }
                    TurnNum = TurnNum + 1;
                    //x%2 = odd or even
                } else {/*repeat the player's turn*/}
            }
        };

        setInterval(GameLoop, 500);
    </script>
</body>

</html>